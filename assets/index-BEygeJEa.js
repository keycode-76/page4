(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();let s={},c={};const sn=()=>{c={sleepy:4,active:0,hunger:0,sanity:10},s={request:"",action:"",window_Max:2e3,window_Min:1e3,computer_normal:1e4,computer_fast:5e3,computer_hyper:1e3,staff_work:2e3,play_time:0,win:!1}},m={anim:0,language:"English",volume:3},Gn="/page4/assets/hey-QOcsQIX8.wav",Vn="/page4/assets/a%20burr%20bour-CgfDoBm-.wav",Kn="/page4/assets/machine_1-xPoump-W.wav",jn="/page4/assets/machine_2-DVRlrrFj.wav",Qn="/page4/assets/working-2FX-Kuug.wav",Zn="/page4/assets/beep-CNWut400.wav",Jn="/page4/assets/footStep-D5LEd8rH.wav",Un="/page4/assets/walkRight-BiXRMwZ1.wav",Yn="/page4/assets/squeeze-0RLJtapz.wav",et="/page4/assets/tapeClick_2-DKrG1Yqp.wav",nt="/page4/assets/lock_1-VAm-sLO_.wav",tt="/page4/assets/hover_1-CPU6wXwn.wav",it="/page4/assets/horror_1-CHzID-B-.wav",st="/page4/assets/snooze_2-CnN2-c4k.wav",at="/page4/assets/heartbeat_2-D5c8AIz-.wav",ot="/page4/assets/horror_2-DNL7FeZt.wav",ct="/page4/assets/tvSnow-DrChzltf.wav",De=new Audio(Gn),an=new Audio(Vn),F=new Audio(Kn),I=new Audio(jn),P=new Audio(Qn),oe=new Audio(Zn),Ee=new Audio(Jn),Te=new Audio(Un),Se=new Audio(Yn),_=new Audio(et),ce=new Audio(nt),le=new Audio(tt),Ae=new Audio(it),xe=new Audio(st),z=new Audio(at),qe=new Audio(ot),Pe=new Audio(ct);P.loop=!0;z.loop=!0;De.pause();an.pause();F.pause();I.pause();oe.pause();Ee.pause();Te.pause();Se.pause();_.pause();ce.pause();le.pause();Ae.pause();xe.pause();qe.pause();Pe.pause();const lt=document.querySelector("#instruct_video_0"),rt=document.querySelector("#instruct_video_1"),dt=[lt,rt,De,an,F,P,I,oe,Ee,Te,Se,_,ce,le,Ae,xe,z,qe,Pe],ut=()=>{dt.forEach(e=>{e.volume=m.volume/5})},r=(e,n,o,l,i,a)=>{const t=document.createElement("div");return e&&(t.id=e),n&&(t.className=n),o&&(t.textContent=o),l&&t.addEventListener("click",l),t},on=r("level_2_menu","menu_btn"),He=r("level_1_menu","menu_btn"),$e=r("volume_menu","menu_btn"),ye=r("menu_btns"),pt=r("menu_img"),y=r("menuArea"),ke=r("menu_bottom"),cn=r("volume_add",0,"+"),ln=r(0,"volume_slot","-"),rn=r(0,"volume_slot","-"),dn=r(0,"volume_slot","-"),un=r(0,"volume_slot","-"),pn=r(0,"volume_slot","-"),mn=[ln,rn,dn,un,pn],_n=r("volume_sub",0,"-"),re=r("instruct_div"),Be=r("instruct_yes",0,0,()=>{_t()}),ve=r("instruct_pass"),be=r("warning_logo");r("logo_1");const je=r("logoArea"),mt=r("tutorialArea");let ne=!1;const vn=e=>(y.innerHTML="",ye.innerHTML="",ye.append(He,on,$e),y.append(pt,ye),ne=!1,Fe(),e.appendChild(y));He.addEventListener("click",()=>{y.innerHTML="",y.appendChild(re),re.append(Be,ve),_.play()});$e.addEventListener("click",()=>{ke.innerHTML="",ne?ne=!1:(y.appendChild(ke),ke.append(_n,ln,rn,dn,un,pn,cn),ne=!0),_.play()});cn.addEventListener("click",()=>{m.volume<mn.length&&(m.volume+=1,Fe())});_n.addEventListener("click",()=>{m.volume>0&&(m.volume-=1,Fe())});const Fe=()=>{mn.forEach((e,n)=>{e.textContent=n<m.volume?"|":"-",ut(),_.play()})},_t=()=>{y.remove(re),_.play()};let G=0;window.addEventListener("animationend",e=>{e.animationName==="show_anim"?G===0?e.target.className="disappear_menu":G===1&&(be.className="disappear_menu"):e.animationName==="disappear_anim"&&(G===0?(e.target.className="",je.innerHTML="",je.appendChild(be),be.className="show_menu",G=1):G===1&&(y.innerHTML="",y.appendChild(mt)))});const S=document.createElement("div"),j=document.createElement("div"),fn=document.createElement("div"),vt=e=>(S.innerHTML="",S.className="",S.id="transDiv",j.id="trans_text",fn.id="trans_snow",j.style.display="block",S.append(j),ft(),e.appendChild(S)),ft=()=>{setTimeout(()=>{j.style.display="none",S.append(fn),S.className="trans_fade",Pe.play()},5e3)},Ie=document.createElement("div");Ie.className="fuzzy-overlay";const w=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,t},k=w("viewPort"),ht=w("view_lose_cover"),wt=w("view_lose_up"),gt=w("view_lose_down"),te=w("view_lose"),yt=w("view_win"),kt=w("view_border"),Q=w("screenBtnDiv"),ze=w("screenL"),Xe=w("screenR");let C=0,$=220,hn=10,B=80,D=null,Ne=!1;const fe=e=>{k.innerHTML="",Q.innerHTML="",C=0,D=null,k.append(kt,Ie),e.appendChild(k)},bt=()=>{Q.append(ze,Xe),k.appendChild(Q)},Qe=()=>{P.pause(),clearInterval(D),k.removeChild(Q),s.win===!1?(te.innerHTML="",te.append(wt,gt),k.appendChild(te),Ae.play()):s.win===!0&&k.appendChild(yt)},Lt=()=>{k.innerHTML="",Q.innerHTML="",k.appendChild(Ie);const e=document.querySelector("#gameArea");e.style.transform="translateX(0px)"};window.addEventListener("animationend",e=>{e.animationName==="lose_screenDown_anim"&&te.appendChild(ht)});ze.addEventListener("mouseenter",()=>{window.innerWidth>960?($=360,B=30):($=220,B=50),clearInterval(D),D=setInterval(()=>{if(C<$){C+=hn;const e=document.querySelector("#gameArea");e.style.transform=`translateX(${C}px)`,Ne=!1}},B),F.currentTime=0,F.play(),P.play()});ze.addEventListener("mouseleave",()=>{clearInterval(D),P.pause(),I.currentTime=0,I.play()});Xe.addEventListener("mouseenter",()=>{window.innerWidth>960?($=360,B=30):($=220,B=50),clearInterval(D),D=setInterval(()=>{if(C>-$){C-=hn;const e=document.querySelector("#gameArea");e.style.transform=`translateX(${C}px)`}C<-140&&s.request!=""&&Ne===!1&&(qe.play(),Ne=!0)},B),F.currentTime=0,F.play(),P.play()});Xe.addEventListener("mouseleave",()=>{clearInterval(D),P.pause(),I.currentTime=0,I.play()});const W=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,t},Z=W("face_text"),b=W("face_state"),de=W("window_blink"),Ct=W("face_rg"),wn=W("window_outLine"),h=W("windowDiv"),Nt=e=>(b.appendChild(Z),h.innerHTML="",h.className="window_start",de.style.opacity=0,b.classList.value="",Z.classList.value="",h.append(Ct,b,de,wn),gn(),e.appendChild(h)),Mt=()=>{z.pause(),s.win===!1?(h.innerHTML="",h.appendChild(wn),h.className="window_endLose",Se.play()):s.win===!0&&(h.className="window_start",b.className="window_endWin",xe.play())};let Dt=8e3,Ze=100;const gn=()=>{de.style.opacity=0;const e=Math.floor(Math.random()*(Dt-Ze+1))+Ze;setTimeout(()=>{de.style.opacity=1,setTimeout(()=>{gn()},150)},e)},yn=()=>{if(!(c.sleepy>=5)&&s.request===""){const e=Math.floor(Math.random()*(s.window_Max-s.window_Min+1))+s.window_Min;setTimeout(()=>{Tt()},e)}},Et=()=>{const e=Math.floor(Math.random()*2);e===0?b.className="paper_1":e===1&&(b.className="paper_2")},Je=["active","hunger","sanity"],Tt=()=>{const e=Math.floor(Math.random()*Je.length);return h.className="window_state",b.classList.value="",b.className=`window_${e}`,Z.className=`face_text_${e}`,s.request=Je[e],se(s.request),ie(s.request,s.computer_fast),z.pause(),z.play(),Z},St=()=>{h.className="window_start",b.classList.value="",Z.classList.value="",z.pause(),yn()},E=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,n&&(t.className=n),o&&(t.textContent=o),l&&t.addEventListener("click",l),t},u=E("staff_door"),At=E("doorFrame"),K=E("doorDiv"),xt=E("feed_btn","request_btn",0,()=>{he("right","hunger")}),qt=E("clean_btn","request_btn",0,()=>{he("right","sanity")}),Pt=E("play_btn","request_btn",0,()=>{he("right","active")}),q=E("door_btns"),Re=E("request_btns","request_btn"),Ht=e=>(K.innerHTML="",K.append(u,q,At),K.className="door_start",u.style.opacity=1,Oe(),m.anim===0&&(u.className="right_1",setTimeout(()=>{u.className="bennet_jump"},1e3),m.anim+=1),e.appendChild(K)),$t=()=>{q.appendChild(Re)},Bt=e=>{Ln(),q.innerHTML="",K.className="door_black",s.win===!1?e===1?u.className="bennet_1":e===2?u.className="bennet_2":e===3&&(u.className="bennet_3"):u.className="back_1"};let Ft=8e3,Ue=100,kn,bn;const Oe=()=>{u.className="staff_idle";const e=Math.floor(Math.random()*(Ft-Ue+1))+Ue;bn=setTimeout(()=>{u.className="staff_blink",kn=setTimeout(()=>{Oe()},250)},e)},Ln=()=>{clearTimeout(bn),clearTimeout(kn)};Re.addEventListener("click",()=>{q.innerHTML="",q.append(xt,qt,Pt),De.play()});const he=(e,n)=>{n&&(s.action=n),Ln(),e==="left"?(u.className="",setTimeout(()=>{u.classList.add(`${e}_1`),Ee.play()},s.staff_work)):e==="right"&&(u.className=`${e}_1`,Te.play()),q.innerHTML=""},It=()=>{s.action==="hunger"?(c.hunger-=2,c.sanity+=1):s.action==="sanity"?(c.sanity+=2,c.active-=1):s.action==="active"&&(c.active-=2,c.hunger+=1),s.request===s.action&&(s.request="",c.sleepy+=1,St()),Ge(),s.action=""};window.addEventListener("animationend",e=>{if(e.animationName==="staff_right_anim")he("left");else if(e.animationName==="staff_left_anim"){if(c.sleepy>=5)return;q.appendChild(Re),Oe(),It()}else e.animationName==="staff_back_anim"?u.style.opacity=0:e.animationName==="bennet_anim"&&(u.className="bennet_jump")});const H=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,n&&(t.className=n),t},Cn=H("activeDiv","screen_text"),Nn=H("hungerDiv","screen_text"),Mn=H("sanityDiv","screen_text"),Dn=H("sleepyDiv","screen_text"),We=H("click_to_start"),ue=H("wallPaper"),M=H("computerDiv"),zt=e=>(M.innerHTML="",ue.className="wallpaper_start",M.append(ue,We),clearInterval(En),e.appendChild(M));We.addEventListener("click",()=>{M.innerHTML="",ue.className="",M.append(ue,Cn,Nn,Mn,Dn),ie("active",s.computer_normal),ie("hunger",s.computer_normal),ie("sanity",s.computer_normal),Ge(),bt(),Et(),yn(),$t(),Xt()});let En;const Xt=()=>{En=setInterval(()=>{s.play_time+=15},1e3)};let Tn={};const ie=(e,n)=>{Tn[e]=setInterval(()=>{c.sleepy>=5?U("win",0):(e==="active"?c.active>9?U("lose",1):c.active+=1:e==="hunger"?c.hunger>9?U("lose",2):c.hunger+=1:e==="sanity"&&(c.sanity<1?U("lose",3):c.sanity-=1),Ge())},n)},se=e=>{clearInterval(Tn[e])},U=(e,n)=>{e==="lose"?(s.win=!1,M.textContent="lose"):e==="win"&&(s.win=!0,M.textContent="Win!!!"),Bt(n),Mt(),Rt(),M.innerHTML=""},Rt=()=>{se("active"),se("hunger"),se("sanity")},Y=e=>{switch(m.language){case"English":return e.english;case"Tradition-CN":return e.traditional;case"Simplified-CN":return e.simplified;case"Spanish":return e.spanish}},Ge=()=>{const e={sleepy:{english:"sleepy:",traditional:"睡意:",simplified:"睡意:",spanish:"sueño:"},active:{english:"active:",traditional:"活耀:",simplified:"活跃:",spanish:"activo:"},hunger:{english:"hunger:",traditional:"飢餓:",simplified:"饥饿:",spanish:"hambre:"},sanity:{english:"sanity:",traditional:"理智:",simplified:"理智:",spanish:"cordura:"}};Dn.textContent=`${Y(e.sleepy)} ${c.sleepy}`,Cn.textContent=`${Y(e.active)} ${c.active}`,Nn.textContent=`${Y(e.hunger)} ${c.hunger}`,Mn.textContent=`${Y(e.sanity)} ${c.sanity}`,oe.currentTime=0,oe.play()},d=(e,n,o,l,i,a,t)=>{const f=document.createElement("div");return f.id=e,n&&(f.className=n),o&&(f.textContent=o),l&&f.addEventListener("click",l),i&&f.addEventListener("mouseover",i),(a||t)&&a&&f.appendChild(a),f};let L=0;const Ot=(e,n,o,l)=>{let i=null;const a=t=>{i||(i=t);const f=Math.min((t-i)/l,1);Math.floor(f*(o-n)+n)>0?e.innerHTML=Math.floor(f*(o-n)+n):e.innerHTML=0,f<1&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)},N=d("endSceneDiv"),ee=d("challengeText"),Ye=d("scoreNum"),X=d("end_lock_1",0,0,e=>{Fn(e,1)}),pe=d("end_lock_2",0,0,e=>{Fn(e,2)}),ae=d("end_btns"),x=d("diskDiv_1"),Wt=d("disk_name",0,"Picture"),Sn=d("disk_Xbtn",0,"X"),An=d("diskPic_1","diskPic",0,()=>{we(1)}),xn=d("diskPic_2","diskPic",0,()=>{we(2)}),qn=d("diskPic_3","diskPic",0,()=>{we(3)}),Pn=d("diskPic_4","diskPic",0,()=>{we(4)}),Me=d("diskPic_Xbtn",0,"X"),R=d("end_btnText"),T=d("backtomenu_btn",0,0,()=>{oi()}),Gt=d("retry_iconBtn_1","end_btn",0,()=>{ci()},()=>{Ve({english:"retry",traditional:"再挑戰",simplified:"再挑战",spanish:"reintentar"})}),Hn=d("disk_iconBtn_1","end_btn",0,0,()=>{Ve({english:"data: picture",traditional:"資料: 照片紀錄",simplified:"资料: 照片记录",spanish:"datos: imagen"})},X),$n=d("next_iconBtn_1","end_btn",0,0,()=>{Ve({english:"one time ticket to challenge 2",traditional:"單次票卷前往關卡二",simplified:"单次票卷前往关卡二",spanish:"boleto único para el desafío 2"})},pe),Vt=e=>(N.innerHTML="",ae.innerHTML="",X.style.opacity=1,pe.style.opacity=1,X.className="end_lock",pe.className="end_lock",L=0,In(),Bn(),e.appendChild(N)),O=e=>{switch(m.language){case"English":return e.english;case"Tradition-CN":return e.traditional;case"Simplified-CN":return e.simplified;case"Spanish":return e.spanish}},Bn=()=>{R.textContent=O({english:"Encrypt files",traditional:"加密檔案",simplified:"加密文件",spanish:"Encriptar archivos"})},Ve=e=>{R.textContent=O(e),le.currentTime=0,le.play()};Hn.addEventListener("click",()=>{if(X.className==="end_lock")return;x.innerHTML="",x.append(Wt,Sn),x.append(An,xn,qn,Pn),document.querySelectorAll(".diskPic").forEach(n=>{n.className="diskPic"}),N.appendChild(x),_.play()});Sn.addEventListener("click",()=>{N.removeChild(x),_.play()});const we=e=>{const n=document.querySelector(`#diskPic_${e}`);n&&(n.className="diskPick_click",x.appendChild(Me))};Me.addEventListener("click",()=>{x.removeChild(Me),An.className="diskPic",xn.className="diskPic",qn.className="diskPic",Pn.className="diskPic",_.play()});$n.addEventListener("click",()=>{});const Fn=(e,n)=>{e.target.parentElement.classList.add("end_lock_click"),n===1?R.textContent=O({english:"unlock for 1000 score",traditional:"分數未達1000",simplified:"分数未达1000",spanish:"Desbloquear por 1000 puntos"}):n===2&&(R.textContent=O({english:"unlock for 1500 score",traditional:"分數未達1500",simplified:"分数未达1500",spanish:"Desbloquear por 1500 puntos"})),setTimeout(()=>{e.target.parentElement.classList.remove("end_lock_click"),Bn()},1e3),_.pause(),ce.currentTime=0,ce.play()},In=()=>{if(ae.append(Gt,Hn,$n),s.win===!0)if(ee.textContent=O({english:"score",traditional:"分數",simplified:"分数",spanish:"puntuación"}),L===0)N.append(ee);else if(L===1){N.append(Ye,ae,R,T),T.style.opacity=0;let e=2e3-s.play_time;c.active<5&&(e+=100),c.hunger<5&&(e+=100),c.sanity>5&&(e+=100),Ot(Ye,0,e,2e3),e>=1e3&&e<1500?X.className="end_unlock":e>=1500&&(X.className="end_unlock",pe.className="end_unlock")}else L===2&&(T.style.opacity=1);else if(s.win===!1)ee.textContent=O({english:"lost connect",traditional:"訊號丟失",simplified:"信号丢失",spanish:"se perdió la conexión"}),L===0?N.append(ee):L===1?(N.append(ae,R,T),T.style.opacity=0):L===2&&(T.style.opacity=1);else return;L+=1};window.addEventListener("animationend",e=>{e.animationName==="showEndScene_anim"?In():e.animationName==="end_unlock_anim"&&(e.target.style.opacity=0)});const J=(e,n,o,l)=>{const i=document.createElement("div");return i.id=e,n&&(i.className=n),o&&(i.textContent=o),l&&i.addEventListener("click",l),i},Le=J("languageDiv"),Kt=J("englishBtn","langBtn","English",()=>{ge("English")}),jt=J("traditionalBtn","langBtn","繁體中文",()=>{ge("Tradition-CN")}),Qt=J("simplifiedBtn","langBtn","简体中文",()=>{ge("Simplified-CN")}),Zt=J("spanishBtn","langBtn","Español",()=>{ge("Spanish")}),Jt=e=>(Le.innerHTML="",Le.append(jt,Qt,Zt,Kt),e.appendChild(Le)),me=document.querySelector("#instruct_video_0"),_e=document.querySelector("#instruct_video_1");Be.addEventListener("click",()=>{m.language==="English"?(me.play(),me.style.display="block"):m.language==="Tradition-CN"&&(_e.play(),_e.style.display="block")});const zn=e=>{e.style.display="none",ve.click()};me.addEventListener("ended",()=>zn(me));_e.addEventListener("ended",()=>zn(_e));const V={english:{lvl1:"Chapter 1",lvl2:"Chapter 2",volume:"Volume",instruct_qz:"Would you like to watch instruction?",play:"Play",pass:"Pass",loading:"LOADING",clickStart:"Click to start",backMenu:"Back to menu"},traditional:{lvl1:"第一章節",lvl2:"第二章節",volume:"音量",instruct_qz:"是否播放教程?",play:"播放",pass:"略過",loading:"載入中",clickStart:"點擊開始",backMenu:"回到首頁"},simplified:{lvl1:"第一章节",lvl2:"第二章节",volume:"音量",instruct_qz:"是否播放教程?",play:"播放",pass:"略过",loading:"加载中",clickStart:"点击开始",backMenu:"返回首页"},spanish:{lvl1:"Capítulo 1",lvl2:"Capítulo 2",volume:"Volumen",instruct_qz:"¿Te gustaría ver las instrucciones?",play:"Reproducir",pass:"Saltar",loading:"CARGANDO",clickStart:"Haga clic para comenzar",backMenu:"Volver al menú"}},ge=e=>{m.language=e,He.textContent=g("lvl1"),on.textContent=g("lvl2"),$e.textContent=g("volume"),re.textContent=g("instruct_qz"),Be.textContent=g("play"),ve.textContent=g("pass"),j.textContent=g("loading"),We.textContent=g("clickStart"),T.textContent=g("backMenu")},g=e=>{switch(m.language){case"English":return V.english[e];case"Tradition-CN":return V.traditional[e];case"Simplified-CN":return V.simplified[e];case"Spanish":return V.spanish[e];default:return V.english[e]}},Ut=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,t},Yt=Ut("backGround"),Ke=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,n&&(t.className=n),o&&(t.textContent=o),t},Xn=Ke("pass_btn","funcBtn","2"),Rn=Ke("danger_btn","funcBtn","1"),Ce=Ke("buttonsDiv"),ei=e=>(Ce.innerHTML="",Ce.append(Rn,Xn),e.appendChild(Ce)),On=e=>{};Xn.addEventListener("click",()=>On());Rn.addEventListener("click",()=>On());const v=(e,n,o,l,i,a)=>{const t=document.createElement("div");return t.id=e,t},A=v("gameArea"),ni=v("gameFilter"),en=v("doorArea"),nn=v("computerArea"),ti=v("computerShadow"),ii=v("tableArea"),si=v("buttonsArea");v("rulesArea");v("lightArea");v("fileArea");const tn=v("windowArea"),ai=v("windowShadow"),Wn=e=>{A.innerHTML="",sn(),zt(nn),ei(si),Nt(tn),Ht(en),A.style.transform="translateX(0px)",A.append(en,ti,nn,ai,tn,ii),A.append(Yt,ni),e.append(A),fe(e)};window.addEventListener("animationend",e=>{e.animationName==="bennet_anim"||e.animationName==="staff_back_anim"?Qe():e.animationName==="end_screen_anim"&&(Lt(),A.innerHTML="",Vt(A))});const p=document.querySelector("#app");sn();Jt(p);document.querySelectorAll(".langBtn").forEach(e=>{e.addEventListener("click",()=>{p.innerHTML="",fe(p),vn(p),_.play()})});ve.addEventListener("click",()=>{p.innerHTML="",fe(p),Wn(p),vt(p),_.play()});const oi=()=>{p.removeChild(gameArea),fe(p),vn(p),_.play()},ci=()=>{p.removeChild(gameArea),Wn(p),_.play()};window.addEventListener("animationend",()=>{event.animationName==="showtrans_anim"&&p.removeChild(transDiv)});
